# ページ構成

このドキュメントは、`spec/scenario.md` および `spec/requirements.md` に基づいて、システムに必要なページ構成を定義します。

## 1. 顧客側ページ

### 1.1 公開ページ（認証不要）

#### 1.1.1 トップページ / メニュー一覧

- **ページ名**: トップページ
- **パス**: `/`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2: 初回予約（Email/パスワード、SSO）
  - 顧客側シナリオ 3: 2回目以降の予約
- **コンポーネント**:
  - `<Header>` - ロゴ、ログインボタン、会員登録ボタン
  - `<MenuList>` - メニュー一覧カード表示
  - `<MenuCard>` - メニュー情報（名前、画像、概要、料金、自費/保険区分）
  - `<Footer>` - 店舗情報、リンク
- **共通レイアウト**: PublicLayout

#### 1.1.2 ログイン / 会員登録ページ

- **ページ名**: ログイン / 会員登録
- **パス**: `/auth/login`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2: 初回予約時のログイン/会員登録
  - 顧客側シナリオ 3: 2回目以降のログイン
  - 顧客側シナリオ 4, 5, 6, 7, 8: マイページアクセス時のログイン
  - エラーケースシナリオ 2: ログイン失敗
- **コンポーネント**:
  - `<LoginForm>` - Email/パスワード入力フォーム
  - `<SSOProviderButtons>` - SSOプロバイダー選択ボタン
  - `<PasswordResetLink>` - パスワードを忘れた場合のリンク
  - `<RegisterLink>` - 新規登録へのリンク
- **共通レイアウト**: AuthLayout
- **UX改善ポイント**: ログインと会員登録を1ページに統合し、タブで切り替え

#### 1.1.3 パスワードリセットページ

- **ページ名**: パスワードリセット
- **パス**: `/auth/reset-password`
- **実現するシナリオ**:
  - その他のシナリオ 2: パスワードリセット
- **コンポーネント**:
  - `<PasswordResetRequestForm>` - Email入力フォーム
  - `<PasswordResetForm>` - 新しいパスワード入力フォーム（トークンパラメータ付きの場合）
- **共通レイアウト**: AuthLayout

#### 1.1.4 メールアドレス確認ページ

- **ページ名**: メールアドレス確認
- **パス**: `/auth/verify-email`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2: 初回登録時のメールアドレス確認
  - 顧客側シナリオ 8: メールアドレス変更時の確認
- **コンポーネント**:
  - `<EmailVerificationResult>` - 確認結果表示（成功/失敗）
  - `<ResendButton>` - 再送信ボタン
- **共通レイアウト**: AuthLayout

### 1.2 予約フロー（認証状態で進行）

#### 1.2.1 スタッフ選択ページ

- **ページ名**: スタッフ選択
- **パス**: `/booking/staff`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2, 3: 予約作成時のスタッフ選択
  - 顧客側シナリオ 5: 予約変更時のスタッフ選択
- **コンポーネント**:
  - `<BookingProgressBar>` - 予約フローの進捗表示
  - `<StaffList>` - スタッフ一覧カード表示
  - `<StaffCard>` - スタッフ情報（名前、画像、担当メニュー）
  - `<SkipButton>` - スタッフ指定をスキップするボタン（管理者設定により表示）
  - `<BackButton>` - 前のステップに戻るボタン
- **共通レイアウト**: PublicLayout
- **UX改善ポイント**: 管理者設定でスタッフ選択が不要な場合、このページをスキップ

#### 1.2.2 日時選択ページ

- **ページ名**: 日時選択
- **パス**: `/booking/datetime`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2, 3: 予約作成時の日時選択
  - 顧客側シナリオ 5: 予約変更時の日時選択
  - 顧客側シナリオ 10: 満席時の予約
  - 顧客側シナリオ 11: 予約受付時間外の予約
- **コンポーネント**:
  - `<BookingProgressBar>` - 予約フローの進捗表示
  - `<Calendar>` - カレンダー表示
  - `<TimeSlotList>` - 選択日の時間枠一覧
  - `<TimeSlot>` - 時間枠（空き/満席/受付時間外の状態表示）
  - `<BackButton>` - 前のステップに戻るボタン
- **共通レイアウト**: PublicLayout

#### 1.2.3 会員情報入力ページ（新規登録時のみ）

- **ページ名**: 会員情報入力
- **パス**: `/booking/customer-info`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2: 初回予約時の会員情報入力
  - エラーケースシナリオ 3: 会員登録時のバリデーションエラー
- **コンポーネント**:
  - `<BookingProgressBar>` - 予約フローの進捗表示
  - `<CustomerInfoForm>` - 会員情報入力フォーム（名前、カナ、Email、電話番号、スポーツ情報）
  - `<FormField>` - 各入力項目（バリデーション機能付き）
  - `<BackButton>` - 前のステップに戻るボタン
- **共通レイアウト**: PublicLayout
- **UX改善ポイント**: 既存会員の場合はこのページをスキップし、確認ページへ直接遷移

#### 1.2.4 予約確認ページ

- **ページ名**: 予約確認
- **パス**: `/booking/confirm`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2, 3: 予約確定前の確認
  - 顧客側シナリオ 5: 予約変更前の確認
  - エラーケースシナリオ 1: 重複予約の防止
  - エラーケースシナリオ 6: 予約変更時の競合
- **コンポーネント**:
  - `<BookingProgressBar>` - 予約フローの進捗表示
  - `<BookingSummary>` - 予約内容のサマリー（メニュー、スタッフ、日時、会員情報）
  - `<ConfirmButton>` - 予約確定ボタン
  - `<BackButton>` - 前のステップに戻るボタン
  - `<ErrorAlert>` - エラーメッセージ表示（重複予約時など）
- **共通レイアウト**: PublicLayout

#### 1.2.5 予約完了ページ

- **ページ名**: 予約完了
- **パス**: `/booking/complete`
- **実現するシナリオ**:
  - 顧客側シナリオ 1, 2, 3: 予約完了後の表示
  - 顧客側シナリオ 5: 予約変更完了後の表示
- **コンポーネント**:
  - `<CompletionMessage>` - 完了メッセージ
  - `<BookingDetails>` - 確定した予約の詳細
  - `<EmailNotification>` - 確認メール送信の通知
  - `<MyPageLink>` - マイページへのリンク
  - `<TopPageLink>` - トップページへのリンク
- **共通レイアウト**: PublicLayout

### 1.3 マイページ（認証必要）

#### 1.3.1 マイページダッシュボード

- **ページ名**: マイページ
- **パス**: `/mypage`
- **実現するシナリオ**:
  - 顧客側シナリオ 4, 5, 6, 7, 8: マイページへのアクセス
- **コンポーネント**:
  - `<UserGreeting>` - ユーザー名表示
  - `<UpcomingBookingsList>` - 直近の予約一覧（最大3件程度）
  - `<QuickActions>` - クイックアクション（予約一覧、会員情報編集、アカウント設定）
- **共通レイアウト**: MypageLayout

#### 1.3.2 予約一覧ページ

- **ページ名**: 予約一覧
- **パス**: `/mypage/bookings`
- **実現するシナリオ**:
  - 顧客側シナリオ 4: 予約一覧の閲覧
  - 顧客側シナリオ 5, 6: 予約変更/キャンセルのための予約選択
- **コンポーネント**:
  - `<BookingTabs>` - タブ（有効な予約、過去の予約、キャンセル済み）
  - `<BookingList>` - 予約一覧
  - `<BookingListItem>` - 予約アイテム（日時、メニュー、スタッフ、ステータス）
  - `<EmptyState>` - 予約がない場合の表示
- **共通レイアウト**: MypageLayout

#### 1.3.3 予約詳細ページ

- **ページ名**: 予約詳細
- **パス**: `/mypage/bookings/:id`
- **実現するシナリオ**:
  - 顧客側シナリオ 4: 予約詳細の確認
  - 顧客側シナリオ 5: 予約の変更
  - 顧客側シナリオ 6: 予約のキャンセル
  - 顧客側シナリオ 12: キャンセル受付時間を過ぎた予約
  - 顧客側シナリオ 13: 変更受付時間を過ぎた予約
  - その他のシナリオ 1: 通知メールの再送信
- **コンポーネント**:
  - `<BookingDetailCard>` - 予約詳細情報（日時、メニュー、スタッフ、ステータス）
  - `<UpdateButton>` - 変更ボタン（期限内の場合のみ有効）
  - `<CancelButton>` - キャンセルボタン（期限内の場合のみ有効）
  - `<ResendEmailButton>` - メール再送信ボタン
  - `<DeadlineWarning>` - 期限切れメッセージ（期限外の場合）
  - `<ContactInfo>` - 店舗連絡先情報（期限外の場合に表示）
- **共通レイアウト**: MypageLayout
- **UX改善ポイント**: キャンセルは確認ダイアログで実行し、別ページ遷移なし

#### 1.3.4 会員情報編集ページ

- **ページ名**: 会員情報編集
- **パス**: `/mypage/profile`
- **実現するシナリオ**:
  - 顧客側シナリオ 7: 会員情報の変更
- **コンポーネント**:
  - `<ProfileForm>` - 会員情報編集フォーム（名前、カナ、電話番号、スポーツ情報、住所、生年月日、性別、職業、緊急連絡先）
  - `<FormField>` - 各入力項目（バリデーション機能付き）
  - `<SaveButton>` - 保存ボタン
  - `<CancelButton>` - キャンセルボタン
- **共通レイアウト**: MypageLayout

#### 1.3.5 メールアドレス変更ページ

- **ページ名**: メールアドレス変更
- **パス**: `/mypage/email`
- **実現するシナリオ**:
  - 顧客側シナリオ 8: メールアドレスの変更
- **コンポーネント**:
  - `<CurrentEmail>` - 現在のメールアドレス表示
  - `<EmailChangeForm>` - 新しいメールアドレス入力フォーム
  - `<VerificationNotice>` - 確認メール送信の説明
  - `<SubmitButton>` - 送信ボタン
- **共通レイアウト**: MypageLayout

#### 1.3.6 アカウント設定ページ

- **ページ名**: アカウント設定
- **パス**: `/mypage/settings`
- **実現するシナリオ**:
  - その他のシナリオ 2: パスワードリセット
  - その他のシナリオ 3: アカウント削除
- **コンポーネント**:
  - `<PasswordChangeSection>` - パスワード変更セクション（リセットリンクへの誘導）
  - `<AccountDeletionSection>` - アカウント削除セクション
  - `<DeleteAccountButton>` - アカウント削除ボタン
  - `<DeletionWarningDialog>` - 削除確認ダイアログ（警告メッセージ、有効予約チェック）
- **共通レイアウト**: MypageLayout

## 2. スタッフ側ページ

### 2.1 認証ページ

#### 2.1.1 スタッフログインページ

- **ページ名**: スタッフログイン
- **パス**: `/admin/login`
- **実現するシナリオ**:
  - 店舗側シナリオ 1: スタッフアカウント発行後のログイン
- **コンポーネント**:
  - `<StaffLoginForm>` - Email/パスワード入力フォーム
  - `<PasswordResetLink>` - パスワードリセットリンク
- **共通レイアウト**: AuthLayout

#### 2.1.2 初回パスワード設定ページ

- **ページ名**: 初回パスワード設定
- **パス**: `/admin/setup-password`
- **実現するシナリオ**:
  - 店舗側シナリオ 1: スタッフアカウント発行後の初回ログイン
- **コンポーネント**:
  - `<PasswordSetupForm>` - パスワード設定フォーム
  - `<PasswordStrengthIndicator>` - パスワード強度表示
  - `<SubmitButton>` - 設定完了ボタン
- **共通レイアウト**: AuthLayout

### 2.2 管理画面（認証必要）

#### 2.2.1 ダッシュボード

- **ページ名**: ダッシュボード
- **パス**: `/admin`
- **実現するシナリオ**:
  - 店舗側シナリオ 2: 初期セットアップ（未設定の場合は設定を促す）
  - 管理画面トップとして各機能へのアクセスポイント
- **コンポーネント**:
  - `<StatsCards>` - 統計情報（今日の予約数、今月の予約数など）
  - `<TodaysBookingsList>` - 本日の予約一覧
  - `<RecentActivities>` - 最近のアクティビティ
  - `<QuickActions>` - クイックアクション（新規予約、顧客管理など）
  - `<SetupChecklist>` - 初期セットアップチェックリスト（未設定項目がある場合）
- **共通レイアウト**: AdminLayout

#### 2.2.2 カレンダー / 予約管理ページ

- **ページ名**: カレンダー / 予約管理
- **パス**: `/admin/bookings`
- **実現するシナリオ**:
  - 店舗側シナリオ 8: 予約状況の確認
  - 店舗側シナリオ 10: 直接予約
  - 店舗側シナリオ 11: 予約の編集
  - 店舗側シナリオ 12: 予約のキャンセル
  - 店舗側シナリオ 14: 来院確認
  - 店舗側シナリオ 15: No-show処理
- **コンポーネント**:
  - `<BookingCalendar>` - カレンダー表示
  - `<DateSelector>` - 日付選択
  - `<TimelineView>` - タイムライン形式の予約一覧（選択日の時間枠ごと）
  - `<BookingCard>` - 予約カード（顧客名、メニュー、スタッフ、ステータス）
  - `<AddBookingButton>` - 新規予約ボタン（フローティングボタンまたは時間枠クリック）
  - `<BookingDialog>` - 予約作成/編集ダイアログ
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: 新規予約・編集はダイアログで実行し、ページ遷移なしで操作完結

#### 2.2.3 予約詳細ダイアログ

- **ページ名**: 予約詳細（ダイアログ）
- **パス**: ダイアログ形式（URLパラメータ `/admin/bookings?detail=:id`）
- **実現するシナリオ**:
  - 店舗側シナリオ 8: 予約詳細の確認
  - 店舗側シナリオ 11, 12, 14, 15: 予約の編集、キャンセル、来院確認、No-show処理
- **コンポーネント**:
  - `<Dialog>` - ダイアログコンテナ
  - `<BookingDetailSection>` - 予約詳細情報
  - `<CustomerInfoSection>` - 顧客情報（リンクで顧客詳細へ）
  - `<ActionButtons>` - アクションボタン（編集、キャンセル、来院確認、No-show）
  - `<ArrivalConfirmationButton>` - 来院確認ボタン
  - `<NoShowButton>` - No-showボタン
- **共通レイアウト**: AdminLayout（ダイアログ）

#### 2.2.4 顧客一覧ページ

- **ページ名**: 顧客一覧
- **パス**: `/admin/customers`
- **実現するシナリオ**:
  - 店舗側シナリオ 9: 顧客情報の確認
  - 店舗側シナリオ 13: 顧客の直接作成
  - 店舗側シナリオ 16: 初診患者情報の入力（顧客検索から）
- **コンポーネント**:
  - `<CustomerSearchBar>` - 検索バー（名前、Email、電話番号）
  - `<CustomerTable>` - 顧客テーブル（名前、カナ、Email、電話番号、最終来院日）
  - `<AddCustomerButton>` - 新規顧客作成ボタン
  - `<CustomerDialog>` - 顧客作成ダイアログ
  - `<Pagination>` - ページネーション
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: 新規顧客作成はダイアログで実行

#### 2.2.5 顧客詳細ページ

- **ページ名**: 顧客詳細
- **パス**: `/admin/customers/:id`
- **実現するシナリオ**:
  - 店舗側シナリオ 9: 顧客情報の確認・編集
  - 店舗側シナリオ 16: 初回問診の入力
- **コンポーネント**:
  - `<CustomerHeader>` - 顧客基本情報ヘッダー
  - `<TabNavigation>` - タブナビゲーション（基本情報、予約履歴、来院履歴、問診情報）
  - `<BasicInfoTab>` - 基本情報タブ（編集可能フォーム）
  - `<BookingHistoryTab>` - 予約履歴タブ
  - `<VisitHistoryTab>` - 来院履歴タブ（No-show含む）
  - `<InterviewTab>` - 問診情報タブ（編集可能）
  - `<AddInterviewButton>` - 初回問診入力ボタン（問診未入力の場合）
  - `<SaveButton>` - 保存ボタン（各タブ）
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: 子情報（予約履歴、来院履歴、問診）はタブで表示し、ページ内で完結

#### 2.2.6 初回問診入力ページ

- **ページ名**: 初回問診入力
- **パス**: `/admin/customers/:id/interview`
- **実現するシナリオ**:
  - 店舗側シナリオ 16: 初診患者情報の入力（タブレットで顧客に入力してもらう）
- **コンポーネント**:
  - `<InterviewForm>` - 問診フォーム（追加個人情報 + 問診情報）
  - `<FormSection>` - フォームセクション（住所、生年月日、性別、職業、緊急連絡先）
  - `<InterviewSection>` - 問診セクション（来院目的、症状、既往歴など）
  - `<SubmitButton>` - 送信ボタン
  - `<CancelButton>` - キャンセルボタン
- **共通レイアウト**: AdminLayout（タブレット最適化レイアウト）
- **UX改善ポイント**: タブレットで顧客が入力しやすいUI（大きめのフォント、タッチ操作最適化）

#### 2.2.7 メニュー管理ページ

- **ページ名**: メニュー管理
- **パス**: `/admin/menus`
- **実現するシナリオ**:
  - 店舗側シナリオ 4: メニュー登録・編集
  - エラーケースシナリオ 7: メニュー削除時の既存予約への影響
- **コンポーネント**:
  - `<MenuList>` - メニュー一覧（カード形式）
  - `<MenuCard>` - メニューカード（名前、画像、料金、自費/保険区分）
  - `<AddMenuButton>` - 新規メニュー作成ボタン
  - `<MenuDialog>` - メニュー作成/編集ダイアログ
  - `<ImageUpload>` - 画像アップロードコンポーネント
  - `<DeleteConfirmDialog>` - 削除確認ダイアログ（既存予約チェック）
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: メニュー作成・編集はダイアログで実行

#### 2.2.8 スタッフ管理ページ

- **ページ名**: スタッフ管理
- **パス**: `/admin/staff`
- **実現するシナリオ**:
  - 店舗側シナリオ 5: スタッフ登録・編集
  - エラーケースシナリオ 8: スタッフ削除時の既存予約への影響
- **コンポーネント**:
  - `<StaffList>` - スタッフ一覧（カード形式）
  - `<StaffCard>` - スタッフカード（名前、画像、タイプ、担当メニュー）
  - `<AddStaffButton>` - 新規スタッフ作成ボタン
  - `<StaffDialog>` - スタッフ作成/編集ダイアログ
  - `<ImageUpload>` - 画像アップロードコンポーネント
  - `<MenuSelector>` - 担当メニュー選択（複数選択）
  - `<DeleteConfirmDialog>` - 削除確認ダイアログ（既存予約チェック）
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: スタッフ作成・編集はダイアログで実行

#### 2.2.9 シフト管理ページ

- **ページ名**: シフト管理
- **パス**: `/admin/shifts`
- **実現するシナリオ**:
  - 店舗側シナリオ 7: スタッフのシフト管理
- **コンポーネント**:
  - `<ShiftCalendar>` - カレンダー表示
  - `<DateSelector>` - 日付選択
  - `<StaffShiftList>` - スタッフ別シフト一覧（選択日）
  - `<ShiftEditor>` - シフト編集（常勤: 休む時間、非常勤: 出勤時間）
  - `<SaveButton>` - 保存ボタン
- **共通レイアウト**: AdminLayout

#### 2.2.10 店舗設定ページ

- **ページ名**: 店舗設定
- **パス**: `/admin/settings`
- **実現するシナリオ**:
  - 店舗側シナリオ 2: 初期セットアップ（店舗情報、営業時間）
  - 店舗側シナリオ 3: 予約設定
  - 店舗側シナリオ 6: 臨時休業の設定
- **コンポーネント**:
  - `<TabNavigation>` - タブナビゲーション（店舗情報、営業時間、予約設定、臨時休業）
  - `<StoreInfoTab>` - 店舗情報タブ（店舗名、住所、電話番号、その他）
  - `<BusinessHoursTab>` - 営業時間タブ（曜日ごと、複数枠対応、定休日）
  - `<BookingSettingsTab>` - 予約設定タブ（時間間隔、最大予約数、各種期限、リマインド設定）
  - `<TemporaryClosureTab>` - 臨時休業タブ（カレンダーから選択、既存予約チェック）
  - `<SaveButton>` - 保存ボタン（各タブ）
- **共通レイアウト**: AdminLayout
- **UX改善ポイント**: 設定項目が多いため、タブで分類して表示

#### 2.2.11 スタッフアカウント管理ページ

- **ページ名**: スタッフアカウント管理
- **パス**: `/admin/staff-accounts`
- **実現するシナリオ**:
  - 店舗側シナリオ 1: スタッフアカウント発行
- **コンポーネント**:
  - `<StaffAccountTable>` - スタッフアカウントテーブル（Email、ロール、ステータス）
  - `<AddStaffAccountButton>` - 新規アカウント作成ボタン
  - `<StaffAccountDialog>` - アカウント作成ダイアログ（Email、ロール選択）
  - `<InvitationSentIndicator>` - 招待メール送信状態表示
  - `<ResendInvitationButton>` - 招待メール再送信ボタン
- **共通レイアウト**: AdminLayout

## 3. 共通レイアウト

### 3.1 PublicLayout（顧客側公開ページ）

- **特徴**: シンプルなヘッダーとフッター
- **ヘッダー**:
  - ロゴ（トップページへリンク）
  - ナビゲーション（メニュー、マイページ）
  - ログイン/会員登録ボタン（未認証時）
  - ユーザーメニュー（認証済み時）
- **フッター**:
  - 店舗情報（名前、住所、電話番号）
  - リンク（プライバシーポリシー、利用規約）

### 3.2 MypageLayout（顧客側マイページ）

- **特徴**: サイドバーナビゲーション付き
- **ヘッダー**: PublicLayoutと同様
- **サイドバー**:
  - マイページメニュー（ダッシュボード、予約一覧、会員情報編集、アカウント設定）
  - ログアウトボタン
- **フッター**: PublicLayoutと同様

### 3.3 AdminLayout（スタッフ側管理画面）

- **特徴**: サイドバーナビゲーション付き、管理者用スタイル
- **ヘッダー**:
  - ロゴ（ダッシュボードへリンク）
  - 通知アイコン
  - スタッフ名表示
  - ログアウトボタン
- **サイドバー**:
  - ダッシュボード
  - カレンダー / 予約管理
  - 顧客管理
  - メニュー管理
  - スタッフ管理
  - シフト管理
  - 店舗設定
  - スタッフアカウント管理（管理者のみ表示）
- **フッター**: なし（または最小限）

### 3.4 AuthLayout（認証ページ）

- **特徴**: 中央配置のフォーム、最小限のヘッダー
- **ヘッダー**:
  - ロゴ（トップページへリンク）
- **フッター**: なし（または最小限）

## 4. UX改善のまとめ

### 4.1 ダイアログ vs. 別ページ

- **ダイアログで実行**:
  - 管理画面の新規作成・編集（メニュー、スタッフ、顧客、予約、スタッフアカウント）
  - 予約詳細（管理画面）
  - 削除確認
  - キャンセル確認（顧客側）
  - 理由: 簡単な操作、コンテキスト維持、ページ遷移による離脱防止

- **別ページで実行**:
  - 予約フロー（複数ステップ、状態管理が必要）
  - 初回問診入力（情報量が多い、タブレット最適化）
  - 会員情報編集（顧客側）
  - 顧客詳細（管理画面、タブで子情報を表示）
  - 理由: 複雑な操作、フォーカスが必要、情報量が多い

### 4.2 タブ vs. 別ページ

- **タブで表示**:
  - 顧客詳細の子情報（予約履歴、来院履歴、問診情報）
  - 店舗設定の各セクション（店舗情報、営業時間、予約設定、臨時休業）
  - 予約一覧のフィルター（有効、過去、キャンセル済み）
  - 理由: 関連情報をまとめて表示、ナビゲーションがスムーズ

- **別ページで表示**:
  - 各メインエンティティ（顧客、予約、メニュー、スタッフ）
  - 理由: 独立した機能、URL共有が必要

### 4.3 条件付きスキップ

- **スタッフ選択ページ**: 管理者設定でスタッフ選択不要の場合、自動的にスキップ
- **会員情報入力ページ**: 既存会員の場合、自動的にスキップして確認ページへ

### 4.4 レスポンシブ対応

- 顧客側: モバイルファーストデザイン（スマートフォンでの予約を想定）
- 管理画面: デスクトップ/タブレット最適化（PC・タブレットでの操作を想定）
- 初回問診入力: タブレット最適化（タッチ操作、大きめのUI）

### 4.5 エラーハンドリング

- **インライン表示**: フォームバリデーションエラー（各入力項目の下に表示）
- **アラート表示**: 重複予約、ネットワークエラー、セッションタイムアウト
- **無効化 + メッセージ**: 期限切れのボタン（変更、キャンセル）に対して無効化し、代替手段を案内

## 5. ページ構成の全体マップ

```
/                           - トップページ / メニュー一覧
/auth/login                 - ログイン / 会員登録
/auth/reset-password        - パスワードリセット
/auth/verify-email          - メールアドレス確認

/booking/staff              - スタッフ選択（予約フロー）
/booking/datetime           - 日時選択（予約フロー）
/booking/customer-info      - 会員情報入力（予約フロー、新規のみ）
/booking/confirm            - 予約確認（予約フロー）
/booking/complete           - 予約完了（予約フロー）

/mypage                     - マイページダッシュボード
/mypage/bookings            - 予約一覧
/mypage/bookings/:id        - 予約詳細
/mypage/profile             - 会員情報編集
/mypage/email               - メールアドレス変更
/mypage/settings            - アカウント設定

/admin/login                - スタッフログイン
/admin/setup-password       - 初回パスワード設定

/admin                      - ダッシュボード
/admin/bookings             - カレンダー / 予約管理
/admin/customers            - 顧客一覧
/admin/customers/:id        - 顧客詳細（タブ: 基本情報、予約履歴、来院履歴、問診情報）
/admin/customers/:id/interview - 初回問診入力
/admin/menus                - メニュー管理
/admin/staff                - スタッフ管理
/admin/shifts               - シフト管理
/admin/settings             - 店舗設定（タブ: 店舗情報、営業時間、予約設定、臨時休業）
/admin/staff-accounts       - スタッフアカウント管理
```
